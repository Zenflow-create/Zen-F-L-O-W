<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pomodoro Timer - ZenFlow</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #8b785d 0%, #6b5b47 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  body.zen-mode {
    background: linear-gradient(135deg, #e0d8d0 0%, #f5f0e1 100%);
  }

  .container {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 48px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  h1 {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 32px;
    background: linear-gradient(135deg, #8b785d, #6b5b47);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.5px;
  }

  #timer-container {
    position: relative;
    width: 280px;
    height: 280px;
    border: 6px solid rgba(139, 120, 93, 0.2);
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(139, 120, 93, 0.05), rgba(107, 91, 71, 0.05));
    margin: 0 auto 32px;
    box-shadow: 0 12px 32px rgba(139, 120, 93, 0.2);
    overflow: hidden;
  }

  .progress-ring {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: conic-gradient(
      from 0deg,
      #8b785d 0deg,
      #6b5b47 var(--progress, 0deg),
      transparent var(--progress, 0deg)
    );
    transition: --progress 1s ease;
  }

  .progress-ring::before {
    content: '';
    position: absolute;
    top: 12px;
    left: 12px;
    right: 12px;
    bottom: 12px;
    background: white;
    border-radius: 50%;
  }

  #timer-display {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 40px;
    font-weight: 700;
    user-select: none;
    background: linear-gradient(135deg, #8b785d, #6b5b47);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    z-index: 10;
  }

  .orbit-icon {
    position: absolute;
    left: 50%;
    width: 48px;
    height: 48px;
    transform-origin: 50% 140px;
    margin-left: -24px;
    transition: transform 0.3s ease;
    z-index: 5;
    filter: drop-shadow(0 4px 12px rgba(139, 120, 93, 0.3));
  }

  #sun {
    top: -24px;
  }

  #moon {
    top: -24px;
    transform: rotate(180deg);
  }

  .controls {
    display: flex;
    gap: 16px;
    justify-content: center;
    flex-wrap: wrap;
  }

  button {
    padding: 16px 24px;
    font-size: 16px;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .primary-btn {
    background: linear-gradient(135deg, #8b785d, #6b5b47);
    color: white;
    box-shadow: 0 4px 16px rgba(139, 120, 93, 0.3);
  }

  .secondary-btn {
    background: rgba(139, 120, 93, 0.1);
    color: #8b785d;
    border: 1px solid rgba(139, 120, 93, 0.2);
  }

  button:hover {
    transform: translateY(-2px);
  }

  .primary-btn:hover {
    box-shadow: 0 6px 20px rgba(139, 120, 93, 0.4);
  }

  .secondary-btn:hover {
    background: rgba(139, 120, 93, 0.2);
  }

  .back-link {
    position: absolute;
    top: 32px;
    left: 32px;
    text-decoration: none;
    color: #6b5b47;
    font-weight: 600;
    padding: 12px 20px;
    background: rgba(139, 120, 93, 0.2);
    backdrop-filter: blur(10px);
    border-radius: 50px;
    border: 1px solid rgba(139, 120, 93, 0.3);
    transition: all 0.2s ease;
    font-size: 14px;
  }

  .back-link:hover {
    background: rgba(139, 120, 93, 0.3);
    transform: translateY(-1px);
  }

  .timer-state {
    margin-bottom: 24px;
    padding: 12px 20px;
    background: linear-gradient(135deg, rgba(139, 120, 93, 0.1), rgba(107, 91, 71, 0.1));
    border-radius: 50px;
    color: #2d3748;
    font-weight: 600;
    display: inline-block;
    border: 1px solid rgba(139, 120, 93, 0.2);
    font-size: 16px;
  }

  .zen-toggle {
    position: fixed;
    bottom: 24px;
    right: 24px;
    background: linear-gradient(135deg, #8b785d, #6b5b47);
    color: white;
    padding: 12px 20px;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 8px 24px rgba(139, 120, 93, 0.3);
    transition: all 0.3s ease;
    z-index: 1000;
    user-select: none;
    font-weight: 600;
    border: none;
  }

  .zen-toggle:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(139, 120, 93, 0.4);
  }

  body.zen-mode .container {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  body.zen-mode .back-link {
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.9);
  }

  body.zen-mode h1 {
    background: linear-gradient(135deg, #e0d8d0, #f5f0e1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  body.zen-mode .timer-state {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-color: rgba(255, 255, 255, 0.2);
  }

  body.zen-mode #timer-container {
    border-color: rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
  }

  body.zen-mode #timer-display {
    background: linear-gradient(135deg, #e0d8d0, #f5f0e1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  body.zen-mode .secondary-btn {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-color: rgba(255, 255, 255, 0.3);
  }

  @media (max-width: 768px) {
    .container {
      padding: 32px 24px;
      margin: 20px;
    }

    #timer-container {
      width: 240px;
      height: 240px;
    }

    #timer-display {
      font-size: 32px;
    }

    .orbit-icon {
      transform-origin: 50% 120px;
      width: 40px;
      height: 40px;
      margin-left: -20px;
    }

    .controls {
      flex-direction: column;
    }

    button {
      width: 100%;
    }

    .back-link {
      top: 20px;
      left: 20px;
      padding: 10px 16px;
    }

    .zen-toggle {
      bottom: 20px;
      right: 20px;
      padding: 10px 16px;
      font-size: 14px;
    }
  }
</style>
</head>
<body>
  <a href="/" class="back-link">‚Üê Dashboard</a>

  <!-- Zen Mode Toggle -->
  <button class="zen-toggle" id="zen-toggle">
    <span>üßò‚Äç‚ôÇÔ∏è Zen Mode</span>
  </button>

  <div class="container">
    <h1>‚è±Ô∏è Focus Timer</h1>

    <div class="timer-state" id="timer-state">Ready to start</div>

    <div id="timer-container">
      <div class="progress-ring" id="progress-ring"></div>
      <div id="timer-display">25:00</div>
      <img id="sun" class="orbit-icon" src="{{ url_for('static', filename='images/sun.svg') }}" alt="Sun" />
      <img id="moon" class="orbit-icon" src="{{ url_for('static', filename='images/moon.svg') }}" alt="Moon" />
    </div>

    <div class="controls">
      <button id="start-btn" class="primary-btn">Start Focus</button>
      <button id="pause-btn" class="secondary-btn" disabled>Pause</button>
      <button id="reset-btn" class="secondary-btn">Reset</button>
    </div>
  </div>

<script>
  const totalSeconds = 25 * 60;
  let secondsLeft = totalSeconds;
  let isRunning = false;
  let timerInterval = null;

  const sun = document.getElementById('sun');
  const moon = document.getElementById('moon');
  const timerDisplay = document.getElementById('timer-display');
  const progressRing = document.getElementById('progress-ring');
  const timerState = document.getElementById('timer-state');
  const startBtn = document.getElementById('start-btn');
  const pauseBtn = document.getElementById('pause-btn');
  const resetBtn = document.getElementById('reset-btn');

  function updateTimer() {
    if (secondsLeft < 0) {
      clearInterval(timerInterval);
      isRunning = false;
      timerState.textContent = "Great session! Time for a break üéâ";
      startBtn.textContent = "Start Focus";
      startBtn.disabled = false;
      pauseBtn.disabled = true;
      sun.style.transform = `rotate(0deg)`;
      moon.style.transform = `rotate(180deg)`;
      progressRing.style.setProperty('--progress', '360deg');
      return;
    }

    const minutes = Math.floor(secondsLeft / 60);
    const seconds = secondsLeft % 60;
    timerDisplay.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;

    const progressDegrees = (360 * (totalSeconds - secondsLeft)) / totalSeconds;
    const rotationDegrees = (360 * (totalSeconds - secondsLeft)) / totalSeconds;

    progressRing.style.setProperty('--progress', `${progressDegrees}deg`);
    sun.style.transform = `rotate(${rotationDegrees}deg)`;
    moon.style.transform = `rotate(${rotationDegrees + 180}deg)`;

    secondsLeft--;
  }

  function startTimer() {
    if (!isRunning) {
      isRunning = true;
      timerState.textContent = "Deep focus mode activated üéØ";
      startBtn.textContent = "Resume";
      startBtn.disabled = true;
      pauseBtn.disabled = false;
      timerInterval = setInterval(updateTimer, 1000);
    }
  }

  function pauseTimer() {
    if (isRunning) {
      isRunning = false;
      timerState.textContent = "Focus paused ‚è∏Ô∏è";
      clearInterval(timerInterval);
      startBtn.disabled = false;
      pauseBtn.disabled = true;
    }
  }

  function resetTimer() {
    isRunning = false;
    clearInterval(timerInterval);
    secondsLeft = totalSeconds;
    timerState.textContent = "Ready to start";
    startBtn.textContent = "Start Focus";
    startBtn.disabled = false;
    pauseBtn.disabled = true;

    timerDisplay.textContent = "25:00";
    progressRing.style.setProperty('--progress', '0deg');
    sun.style.transform = `rotate(0deg)`;
    moon.style.transform = `rotate(180deg)`;
  }

  startBtn.addEventListener('click', startTimer);
  pauseBtn.addEventListener('click', pauseTimer);
  resetBtn.addEventListener('click', resetTimer);

  // Initialize
  updateTimer();

  // Zen Mode functionality
  const zenToggle = document.getElementById('zen-toggle');
  let isZenMode = localStorage.getItem('zenflow-zen-mode') === 'true';

  function toggleZenMode() {
    isZenMode = !isZenMode;
    localStorage.setItem('zenflow-zen-mode', isZenMode);

    if (isZenMode) {
      zenToggle.innerHTML = '<span>‚ú® Exit Zen</span>';
      document.body.classList.add('zen-mode');
    } else {
      zenToggle.innerHTML = '<span>üßò‚Äç‚ôÇÔ∏è Zen Mode</span>';
      document.body.classList.remove('zen-mode');
    }
  }

  // Initialize zen mode state
  if (isZenMode) {
    document.body.classList.add('zen-mode');
    zenToggle.innerHTML = '<span>‚ú® Exit Zen</span>';
  }

  zenToggle.addEventListener('click', toggleZenMode);
</script>

</body>
</html>
