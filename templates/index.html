<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ZenFlow - Productivity Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #f7f3f0 0%, #e8ddd4 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }

    body.zen-mode {
      background: linear-gradient(135deg, #f7f3f0 0%, #e8ddd4 100%);
    }

    .app-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      padding: 24px;
      box-shadow: 4px 0 24px rgba(139, 120, 93, 0.1);
      border-right: 1px solid rgba(139, 120, 93, 0.1);
    }

    .logo {
      text-align: center;
      margin-bottom: 32px;
      padding-bottom: 24px;
      border-bottom: 1px solid rgba(102, 126, 234, 0.1);
    }

    .logo h1 {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 4px;
    }

    .logo .subtitle {
      font-size: 12px;
      color: #8b8b8b;
      font-weight: 400;
    }

    /* Mood Tracker */
    .mood-section {
      margin-bottom: 24px;
      padding: 16px;
      background: rgba(139, 120, 93, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(139, 120, 93, 0.1);
    }

    .mood-title {
      font-size: 12px;
      font-weight: 600;
      color: #8b8b8b;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
    }

    .mood-options {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .mood-emoji {
      font-size: 24px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s ease;
      user-select: none;
    }

    .mood-emoji:hover {
      background: rgba(139, 120, 93, 0.1);
      transform: scale(1.1);
    }

    .mood-emoji.active {
      background: rgba(139, 120, 93, 0.2);
      transform: scale(1.2);
    }

    .mood-suggestion {
      font-size: 11px;
      color: #8b785d;
      text-align: center;
      font-style: italic;
    }

    .nav-section {
      margin-bottom: 32px;
    }

    .nav-title {
      font-size: 11px;
      font-weight: 600;
      color: #8b8b8b;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 16px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 12px;
      text-decoration: none;
      color: #4a5568;
      font-weight: 500;
      margin-bottom: 8px;
      transition: all 0.2s ease;
      background: transparent;
    }

    .nav-item:hover {
      background: rgba(139, 120, 93, 0.1);
      color: #8b785d;
      transform: translateX(4px);
    }

    .nav-item.active {
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      color: white;
      box-shadow: 0 4px 16px rgba(139, 120, 93, 0.3);
    }

    .nav-icon {
      font-size: 18px;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
    }

    .header {
      margin-bottom: 32px;
    }

    .welcome-text {
      font-size: 32px;
      font-weight: 700;
      color: #6b5b47;
      margin-bottom: 8px;
    }

    .date-text {
      font-size: 16px;
      color: rgba(107, 91, 71, 0.8);
      font-weight: 400;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto;
      gap: 24px;
      grid-template-areas: 
        "main-panel timer-panel"
        "ritual-panel side-bottom";
    }

    .panel {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 32px;
      border: 1px solid rgba(139, 120, 93, 0.1);
      box-shadow: 0 8px 32px rgba(107, 91, 71, 0.1);
      transition: all 0.3s ease;
    }

    .panel:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .main-panel {
      grid-area: main-panel;
    }

    .side-top {
      grid-area: side-top;
    }

    .ritual-panel {
      grid-area: ritual-panel;
    }

    .timer-panel {
      grid-area: timer-panel;
    }

    .bottom-left {
      grid-area: bottom-left;
    }

    .side-bottom {
      grid-area: side-bottom;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .panel-title {
      font-size: 20px;
      font-weight: 600;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-link {
      font-size: 14px;
      color: #8b785d;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 8px;
      background: rgba(139, 120, 93, 0.1);
      border: 1px solid rgba(139, 120, 93, 0.2);
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .panel-link:hover {
      background: rgba(139, 120, 93, 0.2);
      transform: translateY(-1px);
    }

    /* Focus Mode Selector */
    .focus-modes {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .focus-mode-btn {
      padding: 8px 16px;
      border: 2px solid rgba(139, 120, 93, 0.2);
      background: rgba(139, 120, 93, 0.05);
      border-radius: 20px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      color: #8b785d;
      transition: all 0.2s ease;
      user-select: none;
    }

    .focus-mode-btn.active {
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      color: white;
      border-color: transparent;
      box-shadow: 0 2px 8px rgba(139, 120, 93, 0.3);
    }

    .focus-mode-btn:hover {
      background: rgba(139, 120, 93, 0.1);
    }

    /* Progress Summary */
    .progress-summary {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .progress-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: rgba(139, 120, 93, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(139, 120, 93, 0.1);
    }

    .progress-label {
      font-size: 14px;
      color: #2d3748;
      font-weight: 500;
    }

    .progress-value {
      font-size: 16px;
      font-weight: 600;
      color: #8b785d;
    }

    .timer-mode {
      text-align: center;
      margin-bottom: 16px;
    }

    .active-mode {
      background: rgba(139, 120, 93, 0.1);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      color: #8b785d;
      border: 1px solid rgba(139, 120, 93, 0.2);
    }

    /* Quick Add Task */
    .quick-add {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
    }

    .quick-add input {
      flex: 1;
      padding: 16px 20px;
      border: 2px solid transparent;
      border-radius: 12px;
      font-size: 14px;
      outline: none;
      background: rgba(139, 120, 93, 0.05);
      color: #2d3748;
      transition: all 0.2s ease;
    }

    .quick-add input:focus {
      border-color: #8b785d;
      background: white;
      box-shadow: 0 0 0 4px rgba(139, 120, 93, 0.1);
    }

    .quick-add button {
      padding: 16px 24px;
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s ease;
      box-shadow: 0 4px 16px rgba(139, 120, 93, 0.3);
    }

    .quick-add button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 120, 93, 0.4);
    }

    /* Task List */
    .task-list {
      list-style: none;
      max-height: 300px;
      overflow-y: auto;
    }

    .task-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 8px;
      background: rgba(139, 120, 93, 0.05);
      border: 1px solid rgba(139, 120, 93, 0.1);
      transition: all 0.2s ease;
    }

    .task-item:hover {
      background: rgba(139, 120, 93, 0.1);
      transform: translateX(4px);
    }

    .task-checkbox {
      width: 20px;
      height: 20px;
      accent-color: #8b785d;
      cursor: pointer;
    }

    .task-text {
      flex: 1;
      font-size: 14px;
      color: #2d3748;
      font-weight: 500;
    }

    .task-completed {
      opacity: 0.6;
      text-decoration: line-through;
      color: #8b8b8b;
    }

    /* Timer Widget */
    .timer-display {
      text-align: center;
      margin: 24px 0;
    }

    .timer-time {
      font-size: 36px;
      font-weight: 700;
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .timer-status {
      font-size: 14px;
      color: #8b8b8b;
      margin-bottom: 20px;
      font-weight: 500;
    }

    .timer-controls {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .timer-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .timer-btn.primary {
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      color: white;
      box-shadow: 0 4px 12px rgba(139, 120, 93, 0.3);
    }

    .timer-btn.secondary {
      background: rgba(139, 120, 93, 0.1);
      color: #8b785d;
      border: 1px solid rgba(139, 120, 93, 0.2);
    }

    .timer-btn:hover {
      transform: translateY(-1px);
    }

    /* Goals Progress */
    .goals-stats {
      background: linear-gradient(135deg, rgba(139, 120, 93, 0.1), rgba(107, 91, 71, 0.1));
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      text-align: center;
      border: 1px solid rgba(139, 120, 93, 0.2);
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(139, 120, 93, 0.2);
      border-radius: 4px;
      margin: 16px 0;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      transition: width 0.3s ease;
      width: 0%;
      border-radius: 4px;
    }

    /* Quote Widget */
    .quote-text {
      font-size: 16px;
      line-height: 1.6;
      color: #2d3748;
      font-style: italic;
      margin-bottom: 16px;
      text-align: center;
      font-weight: 500;
    }

    .quote-author {
      text-align: center;
      color: #8b8b8b;
      font-size: 14px;
      font-weight: 600;
    }

    .quote-refresh {
      margin-top: 20px;
      text-align: center;
    }

    .quote-refresh button {
      background: rgba(139, 120, 93, 0.1);
      border: 1px solid rgba(139, 120, 93, 0.2);
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 12px;
      color: #8b785d;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .quote-refresh button:hover {
      background: rgba(139, 120, 93, 0.2);
      transform: translateY(-1px);
    }

    /* Zen Toggle */
    .zen-toggle {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: linear-gradient(135deg, #8b785d, #6b5b47);
      color: white;
      padding: 12px 20px;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(139, 120, 93, 0.3);
      transition: all 0.3s ease;
      z-index: 1000;
      user-select: none;
      font-weight: 600;
      font-size: 14px;
      border: none;
    }

    .zen-toggle:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(139, 120, 93, 0.4);
    }

    /* Soundscape Controls */
    .soundscape-controls {
      display: flex;
      gap: 8px;
      align-items: center;
      margin-top: 16px;
    }

    .sound-btn {
      padding: 8px 12px;
      border: 1px solid rgba(139, 120, 93, 0.2);
      background: rgba(139, 120, 93, 0.05);
      border-radius: 16px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 600;
      color: #8b785d;
      transition: all 0.2s ease;
    }

    .sound-btn.active {
      background: rgba(139, 120, 93, 0.2);
      border-color: rgba(139, 120, 93, 0.4);
    }

    /* Gamification Elements */
    .streak-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: linear-gradient(135deg, #ffd700, #ffb347);
      color: #8b4513;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 700;
      margin-left: 8px;
    }

    .achievement-popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(76, 175, 80, 0.3);
      transform: translateX(400px);
      transition: transform 0.3s ease;
      z-index: 2000;
    }

    .achievement-popup.show {
      transform: translateX(0);
    }

    /* Workspace Customization Panel */
    .workspace-panel {
      position: fixed;
      top: 0;
      right: 0;
      width: 400px;
      height: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      box-shadow: -4px 0 24px rgba(139, 120, 93, 0.1);
      padding: 32px;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      z-index: 1001;
      border-left: 1px solid rgba(139, 120, 93, 0.1);
      overflow-y: auto;
    }

    .workspace-panel.open {
      transform: translateX(0);
    }

    .workspace-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(102, 126, 234, 0.1);
    }

    .workspace-panel-header h3 {
      font-size: 20px;
      font-weight: 600;
      color: #2d3748;
    }

    .close-panel {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #8b8b8b;
      padding: 0 8px;
    }

    .workspace-options h4 {
      font-size: 16px;
      font-weight: 600;
      color: #4a5568;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .preset-section {
      margin-bottom: 24px;
    }

    .preset-buttons {
      display: flex;
      gap: 12px;
    }

    .preset-btn {
      padding: 10px 16px;
      border: 2px solid rgba(139, 120, 93, 0.2);
      background: rgba(139, 120, 93, 0.05);
      border-radius: 12px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      color: #8b785d;
      transition: all 0.2s ease;
    }

    .preset-btn:hover {
      background: rgba(139, 120, 93, 0.1);
    }
    .preset-btn.active {
        background: linear-gradient(135deg, #8b785d, #6b5b47);
        color: white;
        border-color: transparent;
        box-shadow: 0 2px 8px rgba(139, 120, 93, 0.3);
    }

    .toggle-section {
      margin-bottom: 24px;
    }

    .toggle-item {
      margin-bottom: 12px;
    }

    .toggle-label {
      display: flex;
      align-items: center;
      cursor: pointer;
      font-size: 14px;
      color: #2d3748;
      font-weight: 500;
      position: relative;
      padding-left: 40px; /* Space for the custom switch */
    }

    .toggle-switch {
      position: absolute;
      left: 0;
      width: 32px;
      height: 18px;
      background-color: #ccc;
      border-radius: 9px;
      transition: all 0.3s ease;
    }

    .toggle-switch::before {
      content: '';
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: white;
      top: 2px;
      left: 2px;
      transition: all 0.3s ease;
    }

    .toggle-label input[type="checkbox"] {
      opacity: 0;
      position: absolute;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    .toggle-label input[type="checkbox"]:checked + .toggle-switch {
      background-color: #8b785d;
    }

    .toggle-label input[type="checkbox"]:checked + .toggle-switch::before {
      transform: translateX(14px);
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .sidebar {
        width: 240px;
      }

      .dashboard-grid {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "main-panel"
          "timer-panel"
          "ritual-panel"
          "side-bottom";
      }
    }

    @media (max-width: 768px) {
      .app-container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        padding: 16px;
      }

      .main-content {
        padding: 16px;
      }

      .panel {
        padding: 20px;
      }

      .workspace-panel {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <div class="sidebar">
      <div class="logo">
        <h1>ZenFlow ✨</h1>
        <p class="subtitle">Productive • Mindful • Focused</p>
      </div>

      <!-- Mood Tracker -->
      <div class="mood-section" id="mood-section">
        <div class="mood-title">Today's Focus</div>
        <div class="mood-options">
          <span class="mood-emoji active" data-mood="focused" title="Focused">🎯</span>
          <span class="mood-emoji" data-mood="calm" title="Calm">🧘</span>
          <span class="mood-emoji" data-mood="creative" title="Creative">🎨</span>
        </div>
        <div class="mood-suggestion" id="mood-suggestion"></div>
      </div>

      <div class="nav-section">
        <div class="nav-title">Workspace</div>
        <a href="/" class="nav-item active">
          <span class="nav-icon">🏠</span>
          <span>Dashboard</span>
        </a>
        <a href="/tasks" class="nav-item">
          <span class="nav-icon">✅</span>
          <span>Tasks</span>
        </a>
        <a href="/goals" class="nav-item">
          <span class="nav-icon">🎯</span>
          <span>Goals</span>
        </a>
        <a href="/timer" class="nav-item">
          <span class="nav-icon">⏱️</span>
          <span>Focus Timer</span>
        </a>
        <a href="/quotes" class="nav-item">
          <span class="nav-icon">💬</span>
          <span>Inspiration</span>
        </a>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="header">
        <h1 class="welcome-text">Good morning! 🌅</h1>
        <p class="date-text" id="current-date">Let's make today productive</p>
      </div>

      <div class="dashboard-grid">
        <!-- Main Task Panel -->
        <div class="panel main-panel" id="tasks-panel">
          <div class="panel-header">
            <h2 class="panel-title">
              ✅ Today's Focus
              <span class="streak-badge" id="task-streak">🔥 0 day streak</span>
            </h2>
            <a href="/tasks" class="panel-link">View All →</a>
          </div>

          <div class="quick-add">
            <input id="quick-task-input" type="text" placeholder="What needs to be done today?">
            <button id="quick-add-btn">Add Task</button>
          </div>

          <ul class="task-list" id="task-list">
            <!-- Tasks will be dynamically added here -->
          </ul>
        </div>

        <!-- Progress Summary -->
        <div class="panel ritual-panel" id="progress-panel">
          <div class="panel-header">
            <h3 class="panel-title">📊 Today's Progress</h3>
          </div>

          <div class="progress-summary">
            <div class="progress-item">
              <div class="progress-label">Tasks Completed</div>
              <div class="progress-value" id="tasks-completed">0/0</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">Focus Time</div>
              <div class="progress-value" id="focus-time">0 min</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">Streak</div>
              <div class="progress-value" id="daily-streak">0 days</div>
            </div>
          </div>
        </div>

        <!-- Enhanced Timer Widget -->
        <div class="panel timer-panel" id="timer-panel">
          <div class="panel-header">
            <h3 class="panel-title">⏱️ Focus Session</h3>
            <a href="/timer" class="panel-link">Full Timer →</a>
          </div>

          <div class="timer-mode">
            <span class="active-mode">🍅 25-Minute Focus</span>
          </div>

          <div class="timer-display">
            <div class="timer-time" id="timer-display">25:00</div>
            <div class="timer-status" id="timer-status">Ready to focus</div>
            <div class="timer-controls">
              <button class="timer-btn primary" id="mini-start">Start</button>
              <button class="timer-btn secondary" id="mini-reset">Reset</button>
            </div>
          </div>
        </div>



        <!-- Quote Widget -->
        <div class="panel side-bottom" id="quotes-panel">
          <div class="panel-header">
            <h3 class="panel-title">💫 Daily Inspiration</h3>
            <a href="/quotes" class="panel-link">More →</a>
          </div>

          <div class="quote-text" id="quote-text">Loading inspiration...</div>
          <div class="quote-author" id="quote-author"></div>
          <div class="quote-refresh">
            <button id="new-quote-btn">New Quote</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Achievement Popup -->
  <div class="achievement-popup" id="achievement-popup">
    <strong>🎉 Achievement Unlocked!</strong>
    <div id="achievement-text">Great job staying focused!</div>
  </div>

  <!-- Workspace Customization Toggle -->
    <button class="workspace-toggle" id="workspace-toggle">
      <span>⚙️ Customize</span>
    </button>

    <!-- Zen Mode Toggle -->
    <button class="zen-toggle" id="zen-toggle">
      <span>🧘‍♂️ Zen Mode</span>
    </button>

    <!-- Workspace Customization Panel -->
    <div class="workspace-panel" id="workspace-panel">
      <div class="workspace-panel-header">
        <h3>🎛️ Customize Your Workspace</h3>
        <button class="close-panel" id="close-panel">×</button>
      </div>
      <div class="workspace-options">
        <div class="preset-section">
          <h4>Quick Presets</h4>
          <div class="preset-buttons">
            <button class="preset-btn" data-preset="minimal">Minimal</button>
            <button class="preset-btn" data-preset="balanced">Balanced</button>
            <button class="preset-btn" data-preset="full">Full</button>
          </div>
        </div>
        <div class="toggle-section">
          <h4>Dashboard Sections</h4>
          <div class="toggle-item">
            <label class="toggle-label">
              <input type="checkbox" id="toggle-tasks" checked>
              <span class="toggle-switch"></span>
              ✅ Today's Focus (Tasks)
            </label>
          </div>
          <div class="toggle-item">
            <label class="toggle-label">
              <input type="checkbox" id="toggle-progress" checked>
              <span class="toggle-switch"></span>
              📊 Progress Summary
            </label>
          </div>
          <div class="toggle-item">
            <label class="toggle-label">
              <input type="checkbox" id="toggle-timer" checked>
              <span class="toggle-switch"></span>
              ⏱️ Focus Timer
            </label>
          </div>
          <div class="toggle-item">
            <label class="toggle-label">
              <input type="checkbox" id="toggle-quotes" checked>
              <span class="toggle-switch"></span>
              💫 Daily Inspiration
            </label>
          </div>
        </div>
        <div class="sidebar-section">
          <h4>Sidebar Features</h4>
          <div class="toggle-item">
            <label class="toggle-label">
              <input type="checkbox" id="toggle-mood" checked>
              <span class="toggle-switch"></span>
              🎭 Mood Tracker
            </label>
          </div>
        </div>
      </div>
    </div>

  <script>
    // Set current date with greeting
    const now = new Date();
    const hour = now.getHours();
    let greeting = "Good morning!";
    if (hour >= 12 && hour < 17) greeting = "Good afternoon!";
    else if (hour >= 17) greeting = "Good evening!";

    document.querySelector('.welcome-text').textContent = `${greeting} 🌅`;

    const options = { 
      weekday: 'long', 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric' 
    };
    document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);

    // Mood tracking system
    const moodEmojis = document.querySelectorAll('.mood-emoji');
    const moodSuggestion = document.getElementById('mood-suggestion');
    const moodSuggestions = {
      energetic: "Perfect for tackling challenging tasks! 💪",
      focused: "Great! Time for deep work sessions 🎯", 
      calm: "Ideal for planning and reflection 🧘",
      creative: "Perfect for brainstorming and ideation! 🎨",
      tired: "Take it easy, focus on simple tasks 😌"
    };

    moodEmojis.forEach(emoji => {
      emoji.addEventListener('click', () => {
        moodEmojis.forEach(e => e.classList.remove('active'));
        emoji.classList.add('active');
        const mood = emoji.dataset.mood;
        moodSuggestion.textContent = moodSuggestions[mood];
        localStorage.setItem('zenflow-mood', mood);

        // Update quote suggestions based on mood
        updateQuoteForMood(mood);
      });
    });

    // Load saved mood
    const savedMood = localStorage.getItem('zenflow-mood');
    if (savedMood) {
      document.querySelector(`[data-mood="${savedMood}"]`)?.classList.add('active');
      moodSuggestion.textContent = moodSuggestions[savedMood];
    }

    // Task Management with gamification
    const taskInput = document.getElementById('quick-task-input');
    const taskList = document.getElementById('task-list');
    const quickAddBtn = document.getElementById('quick-add-btn');
    const taskStreak = document.getElementById('task-streak');
    let tasks = JSON.parse(localStorage.getItem('zenflow-tasks') || '[]');
    let completedToday = 0;

    function showAchievement(text) {
      const popup = document.getElementById('achievement-popup');
      document.getElementById('achievement-text').textContent = text;
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), 3000);
    }

    function updateStreak() {
      const streak = parseInt(localStorage.getItem('zenflow-streak') || '0');
      taskStreak.innerHTML = `🔥 ${streak} day streak`;
    }

    function renderTasks() {
      taskList.innerHTML = '';
      tasks.slice(0, 5).forEach((task, index) => {
        const li = document.createElement('li');
        li.className = 'task-item';
        li.innerHTML = `
          <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''}>
          <span class="task-text ${task.completed ? 'task-completed' : ''}">${task.text}</span>
        `;

        const checkbox = li.querySelector('.task-checkbox');
        checkbox.addEventListener('change', () => {
          tasks[index].completed = checkbox.checked;
          localStorage.setItem('zenflow-tasks', JSON.stringify(tasks));

          if (checkbox.checked) {
            completedToday++;
            if (completedToday === 3) showAchievement("Task Master! 3 tasks completed! 🏆");
            if (completedToday === 5) showAchievement("Productivity Champion! 5 tasks done! 🌟");
          } else {
            completedToday = Math.max(0, completedToday - 1);
          }

          renderTasks();
          updateGoalsProgress();
        });

        taskList.appendChild(li);
      });

      if (tasks.length === 0) {
        taskList.innerHTML = '<div style="text-align: center; color: #8b8b8b; padding: 20px;">No tasks yet. Add one above! 🚀</div>';
      }
    }

    function addTask() {
      const text = taskInput.value.trim();
      if (text) {
        tasks.unshift({ text, completed: false, id: Date.now() });
        localStorage.setItem('zenflow-tasks', JSON.stringify(tasks));
        taskInput.value = '';
        renderTasks();
        updateGoalsProgress();
      }
    }

    quickAddBtn.addEventListener('click', addTask);
    taskInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') addTask();
    });

    // Focus Mode System
    const focusModes = document.querySelectorAll('.focus-mode-btn');
    let currentFocusMode = 'pomodoro';
    let timerMinutes = 25;

    focusModes.forEach(btn => {
      btn.addEventListener('click', () => {
        focusModes.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFocusMode = btn.dataset.mode;
        timerMinutes = parseInt(btn.dataset.time);
        resetMiniTimer();
      });
    });

    // Enhanced Timer with soundscapes
    let timerSeconds = timerMinutes * 60;
    let timerRunning = false;
    let timerInterval = null;
    const timerDisplay = document.getElementById('timer-display');
    const timerStatus = document.getElementById('timer-status');
    const miniStart = document.getElementById('mini-start');
    const miniReset = document.getElementById('mini-reset');

    // Soundscape system
    const soundBtns = document.querySelectorAll('.sound-btn');
    let currentSound = 'none';

    soundBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        soundBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentSound = btn.dataset.sound;
        localStorage.setItem('zenflow-sound', currentSound);
      });
    });

    function updateTimerDisplay() {
      const minutes = Math.floor(timerSeconds / 60);
      const seconds = timerSeconds % 60;
      timerDisplay.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    }

    function startMiniTimer() {
      if (!timerRunning) {
        timerRunning = true;
        timerStatus.textContent = `${currentFocusMode} mode activated 🎯`;
        miniStart.textContent = 'Pause';
        timerInterval = setInterval(() => {
          timerSeconds--;
          updateTimerDisplay();
          if (timerSeconds <= 0) {
            timerRunning = false;
            timerStatus.textContent = 'Great session! Take a break 🎉';
            miniStart.textContent = 'Start';
            clearInterval(timerInterval);
            showAchievement('Focus session completed! 🎯');
          }
        }, 1000);
      } else {
        timerRunning = false;
        timerStatus.textContent = 'Paused ⏸️';
        miniStart.textContent = 'Resume';
        clearInterval(timerInterval);
      }
    }

    function resetMiniTimer() {
      timerRunning = false;
      timerSeconds = timerMinutes * 60;
      timerStatus.textContent = 'Ready to focus';
      miniStart.textContent = 'Start';
      clearInterval(timerInterval);
      updateTimerDisplay();
    }

    miniStart.addEventListener('click', startMiniTimer);
    miniReset.addEventListener('click', resetMiniTimer);

    // Daily Rituals System
    const ritualItems = document.querySelectorAll('.ritual-item');
    let completedRituals = JSON.parse(localStorage.getItem('zenflow-rituals') || '{}');

    ritualItems.forEach(item => {
      const checkbox = item.querySelector('.ritual-checkbox');
      const ritualId = item.dataset.ritual;

      if (completedRituals[ritualId]) {
        checkbox.checked = true;
        item.classList.add('completed');
      }

      checkbox.addEventListener('change', () => {
        completedRituals[ritualId] = checkbox.checked;
        localStorage.setItem('zenflow-rituals', JSON.stringify(completedRituals));
        item.classList.toggle('completed', checkbox.checked);

        if (checkbox.checked) {
          showAchievement('Ritual completed! Building healthy habits 🌸');
        }
      });
    });

    // Enhanced Quote System with mood-based quotes
    const quotes = {
      energetic: [
        { content: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
        { content: "Energy and persistence conquer all things.", author: "Benjamin Franklin" },
        { content: "Don't wait for opportunity. Create it.", author: "George Bernard Shaw" }
      ],
      focused: [
        { content: "Concentrate all your thoughts upon the work at hand.", author: "Alexander Graham Bell" },
        { content: "Focus on being productive instead of busy.", author: "Tim Ferriss" },
        { content: "The successful warrior is the average man with laser-like focus.", author: "Bruce Lee" }
      ],
      calm: [
        { content: "Peace comes from within. Do not seek it without.", author: "Buddha" },
        { content: "In the midst of movement and chaos, keep stillness inside of you.", author: "Deepak Chopra" },
        { content: "Calm mind brings inner strength and self-confidence.", author: "Dalai Lama" }
      ],
      creative: [
        { content: "Creativity is intelligence having fun.", author: "Albert Einstein" },
        { content: "The creative adult is the child who survived.", author: "Ursula K. Le Guin" },
        { content: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" }
      ],
      tired: [
        { content: "Rest when you're weary. Refresh and renew yourself.", author: "Ralph Marston" },
        { content: "Take care of your body. It's the only place you have to live.", author: "Jim Rohn" },
        { content: "Sometimes the most productive thing you can do is relax.", author: "Mark Black" }
      ]
    };

    const quoteText = document.getElementById('quote-text');
    const quoteAuthor = document.getElementById('quote-author');
    const newQuoteBtn = document.getElementById('new-quote-btn');

    function updateQuoteForMood(mood) {
      if (quotes[mood]) {
        const moodQuotes = quotes[mood];
        const quote = moodQuotes[Math.floor(Math.random() * moodQuotes.length)];
        quoteText.textContent = `"${quote.content}"`;
        quoteAuthor.textContent = `— ${quote.author}`;
      }
    }

    function showRandomQuote() {
      const savedMood = localStorage.getItem('zenflow-mood');
      if (savedMood && quotes[savedMood]) {
        updateQuoteForMood(savedMood);
      } else {
        const allQuotes = Object.values(quotes).flat();
        const quote = allQuotes[Math.floor(Math.random() * allQuotes.length)];
        quoteText.textContent = `"${quote.content}"`;
        quoteAuthor.textContent = `— ${quote.author}`;
      }
    }

    newQuoteBtn.addEventListener('click', showRandomQuote);

    // Goals Progress
    function updateGoalsProgress() {
      const completed = tasks.filter(task => task.completed).length;
      const total = tasks.length;
      const percentage = total > 0 ? (completed / total) * 100 : 0;

      // Ensure goals-progress element exists before trying to style it
      const goalsProgressElement = document.getElementById('goals-progress');
      if (goalsProgressElement) {
        goalsProgressElement.style.width = `${percentage}%`;
      }
      // Update text content if the element exists
      const goalsStatsTextElement = document.getElementById('goals-stats-text');
      if (goalsStatsTextElement) {
        goalsStatsTextElement.textContent = `${completed} of ${total} tasks completed`;
      }
    }

    // Zen Mode
    const zenToggle = document.getElementById('zen-toggle');
    let isZenMode = localStorage.getItem('zenflow-zen-mode') === 'true';

    function toggleZenMode() {
      isZenMode = !isZenMode;
      localStorage.setItem('zenflow-zen-mode', isZenMode);

      if (isZenMode) {
        zenToggle.innerHTML = '<span>✨ Exit Zen</span>';
        document.body.classList.add('zen-mode');
      } else {
        zenToggle.innerHTML = '<span>🧘‍♂️ Zen Mode</span>';
        document.body.classList.remove('zen-mode');
      }
    }

    if (isZenMode) {
      document.body.classList.add('zen-mode');
      zenToggle.innerHTML = '<span>✨ Exit Zen</span>';
    }

    zenToggle.addEventListener('click', toggleZenMode);

    // Workspace Customization Logic
    const workspaceToggle = document.getElementById('workspace-toggle');
    const workspacePanel = document.getElementById('workspace-panel');
    const closePanelBtn = document.getElementById('close-panel');
    const presetButtons = document.querySelectorAll('.preset-btn');
    const sectionCheckboxes = document.querySelectorAll('.workspace-options input[type="checkbox"]');

    // Load saved workspace state
    let savedLayout = JSON.parse(localStorage.getItem('zenflow-workspace-layout')) || {};

    function applyLayout(layout) {
      document.getElementById('tasks-panel').style.display = layout.tasks ? 'block' : 'none';
      document.getElementById('progress-panel').style.display = layout.progress ? 'block' : 'none';
      document.getElementById('timer-panel').style.display = layout.timer ? 'block' : 'none';
      document.getElementById('quotes-panel').style.display = layout.quotes ? 'block' : 'none';
      document.getElementById('mood-section').style.display = layout.mood ? 'block' : 'none';
    }

    function saveLayout() {
      savedLayout = {
        tasks: document.getElementById('toggle-tasks').checked,
        progress: document.getElementById('toggle-progress').checked,
        timer: document.getElementById('toggle-timer').checked,
        quotes: document.getElementById('toggle-quotes').checked,
        mood: document.getElementById('toggle-mood').checked,
      };
      localStorage.setItem('zenflow-workspace-layout', JSON.stringify(savedLayout));
      applyLayout(savedLayout);
    }

    function setActivePreset(presetName) {
      presetButtons.forEach(btn => btn.classList.remove('active'));
      const activeButton = document.querySelector(`.preset-btn[data-preset="${presetName}"]`);
      if (activeButton) {
        activeButton.classList.add('active');
      }
    }

    function applyPreset(presetName) {
      let layout = {};
      switch (presetName) {
        case 'minimal':
          layout = { tasks: true, progress: false, timer: false, quotes: false, mood: false };
          break;
        case 'balanced':
          layout = { tasks: true, progress: true, timer: true, quotes: false, mood: true };
          break;
        case 'full':
          layout = { tasks: true, progress: true, timer: true, quotes: true, mood: true };
          break;
        default:
          layout = { tasks: true, progress: true, timer: true, quotes: true, mood: true }; // Default to full
      }
      
      // Update checkboxes
      document.getElementById('toggle-tasks').checked = layout.tasks;
      document.getElementById('toggle-progress').checked = layout.progress;
      document.getElementById('toggle-timer').checked = layout.timer;
      document.getElementById('toggle-quotes').checked = layout.quotes;
      document.getElementById('toggle-mood').checked = layout.mood;

      saveLayout();
      setActivePreset(presetName);
    }

    workspaceToggle.addEventListener('click', () => {
      workspacePanel.classList.add('open');
    });

    closePanelBtn.addEventListener('click', () => {
      workspacePanel.classList.remove('open');
    });

    presetButtons.forEach(btn => {
      btn.addEventListener('click', () => applyPreset(btn.dataset.preset));
    });

    sectionCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', saveLayout);
    });

    // Initialize saved layout on load
    if (Object.keys(savedLayout).length > 0) {
      applyLayout(savedLayout);
      // Determine which preset button to activate based on saved layout
      if (savedLayout.tasks && !savedLayout.progress && !savedLayout.timer && !savedLayout.quotes && !savedLayout.mood) {
        setActivePreset('minimal');
      } else if (savedLayout.tasks && savedLayout.progress && savedLayout.timer && !savedLayout.quotes && savedLayout.mood) {
        setActivePreset('balanced');
      } else {
        setActivePreset('full'); // Assume full if not matching others
      }
    } else {
      // If no saved layout, apply default (full)
      applyPreset('full');
    }


    // Initialize everything
    updateStreak();
    renderTasks();
    updateGoalsProgress();
    updateTimerDisplay();
    showRandomQuote();

    // Load saved sound preference
    const savedSound = localStorage.getItem('zenflow-sound') || 'none';
    document.querySelector(`[data-sound="${savedSound}"]`)?.classList.add('active');
  </script>
</body>
</html>